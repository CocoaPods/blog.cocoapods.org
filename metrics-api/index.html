<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
      <title>Metrics API - CocoaPods Blog</title>
    

    <meta name="description" content="The blog for CocoaPods.org the Cocoa Dependency Manager">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="application/rss+xml" title="CocoaPods Blog" href="/feed.xml">

    <meta charset="utf-8" /><meta content="cocoapods objective-c objc swift package manager libraries documentation search pods podspec podfile cocoa apple ios library" name="keywords" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="The Dependency Manager for iOS &amp; Mac projects" name="description" /><meta content="CocoaPods Dev Team" name="author" /><meta content="summary" name="twitter:card" /><meta content="@CocoaPods" name="twitter:site" /><meta content="@CocoaPods" name="twitter:creator" /><meta content="CocoaPods" name="twitter:title" /><meta content="The Dependency Manager for iOS &amp; Mac projects." name="twitter:description" /><meta content="https://www.cocoapods.org/" name="twitter:url" />
    <link rel="shortcut icon" href="http://cocoapods.org/favicons/favicon.ico" type="image/x-icon" /><link rel="apple-touch-icon" href="http://cocoapods.org/favicons/apple-touch-icon.png" /><link rel="apple-touch-icon" sizes="57x57" href="http://cocoapods.org/favicons/apple-touch-icon-57x57.png" /><link rel="apple-touch-icon" sizes="60x60" href="http://cocoapods.org/favicons/apple-touch-icon-60x60.png" /><link rel="apple-touch-icon" sizes="72x72" href="http://cocoapods.org/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon" sizes="76x76" href="http://cocoapods.org/favicons/apple-touch-icon-76x76.png" /><link rel="apple-touch-icon" sizes="114x114" href="http://cocoapods.org/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon" sizes="120x120" href="http://cocoapods.org/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon" sizes="144x144" href="http://cocoapods.org/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon" sizes="152x152" href="http://cocoapods.org/favicons/apple-touch-icon-152x152.png" />

    <link rel="stylesheet" href="/assets/bootstrap-3b61caa441fab92578453d6681fbf963.css">
    <link rel="stylesheet" href="/assets/main-98e45c530f3fa80237d0999140dcade6.css">
    <link rel="stylesheet" href="/assets/blog-4c079f710dc63bea556d959640ecebd4.css">


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29866548-3', 'cocoapods.org');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <nav class="navbar navbar-static-top" role="navigation"><section class="container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-header-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="glyphicon glyphicon-plus"></span></button><a class="navbar-brand" href="http://cocoapods.org"></a></div><div class="collapse navbar-collapse navbar-header-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://cocoapods.org/about">About</a></li><li><a href="http://guides.cocoapods.org">Guides</a></li><li class="active"><a href="http://blog.cocoapods.org">Blog</a></li></ul></div></section></nav>

    <div id ="">
<section class="container" >
  <article class="row">
  <header class="col-md-8 col-md-offset-2 headline blog-post">
    
      <h1>Metrics API</h1>
    
    
  </header>
  </article>
</section>
</div>

<section id="content-wrapper" class="post">
  <section class="container">
    <article class="row">
      <article class="author metadata col-md-2 col-md-push-10">
        <header>
          
            
              <img class="gravatar large" src="http://gravatar.com/avatar/de2d64478e715fb02266f77a3f5641f6?s=144" height=72 width=72>
            
            
              
                <p><a href="http://twitter.com/hanke">Florian Hanke</a></p>
              
            
             <p>11 December 2014</p>

            
              <a href="https://twitter.com/hanke" class="twitter-follow-button" data-show-count="false" data-lang="en">
                Follow @hanke
              </a>
            
        </header>
      </article>
    
      <article class="content col-md-8">
        <p>TL;DR:
We have a new <em>metrics</em> API that you can now use.</p>

<!-- more -->

<p>For the past nine months, we&#39;ve had a metrics API where we gather data for each pod, currently only from GitHub.</p>

<h2>API</h2>

<p>Currently the API provides GitHub metrics, per pod.
The provided format is JSON, which is also the default.</p>

<p>It&#39;s best if you give it a try yourself.
Here&#39;s a popular pod:
<a href="http://metrics.cocoapods.org/api/v1/pods/AFNetworking.json">http://metrics.cocoapods.org/api/v1/pods/AFNetworking.json</a></p>

<p>And here&#39;s a not yet popular pod:
<a href="http://metrics.cocoapods.org/api/v1/pods/KFData.json">http://metrics.cocoapods.org/api/v1/pods/KFData.json</a></p>

<p>The API pattern is, you guessed it:
<a href="http://metrics.cocoapods.org/api/v1/pods/PODNAME.json">http://metrics.cocoapods.org/api/v1/pods/PODNAME.json</a></p>

<p>Each pod&#39;s data is updated roughly every 2 hours.</p>

<p>To check the status of the metrics app, you can call:
<a href="http://metrics.cocoapods.org/api/v1/status">http://metrics.cocoapods.org/api/v1/status</a></p>

<p>This will tell you the total amount of pods, and how many have been found on GitHub, and how many have not been found after three tries.</p>

<h2>Design</h2>

<p>The metrics app is very straightforward.
It lives on Heroku and consists of two pieces:
A round robin updater, and a resetter.</p>

<p>The updater is forked off as the web app is started.
It runs forever and goes through each pod, one by one.
Every second, it queries GitHub for metrics data of another pod.
Currently, all pods are updated roughly every two hours.</p>

<p>If it can&#39;t find the pod, it marks the pod as once not found.
If your pod is not found three times (on GitHub), roughly 6 hours, it gives up on the pod.
Currently there are 117 pods which have no corresponding repo page on GitHub.
This is ok, as not everybody is or needs to be on GitHub.</p>

<p>If a pod is not found, won&#39;t metrics ever try again?
We&#39;ve got that covered.
The resetter listens to the Trunk (where you push pods) web hooks.
The trunk web hook system pings many CocoaPods websites to inform them of updated pods.
If a new pod has been added, just a new versions, or a new commits – it pings for example the metrics webapp.
If the metrics app receives the Trunk app&#39;s bat signal, it resets the pod&#39;s not found count.
From then on, metrics will try to find the pod&#39;s metrics again on GitHub.</p>

<h2>Closing words</h2>

<p>Why use this instead of the GitHub API?
You can access it via a pod&#39;s name and it&#39;s designed to be extensible, so more exciting metrics will be added.</p>

<p>We hope you&#39;ll use the API for success and profit.
If you do, let us know.</p>

<p>Also, if you feel strongly that another service (besides GitHub) should be included, let us know.</p>

<p>Go forth and measure!</p>

      </article>
    </article>
  </section>
</section>

<section id="post-accessories"><section class="container"><div class="row"><article class="content col-md-8 col-md-offset-2"><a data-container="body" data-content="CocoaPods is an open source project. Help us improve these blog posts by sending a pull request. ❤" data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="https://github.com/CocoaPods/blog.cocoapods.org/tree/master/_posts/2014-12-11-metrics-api.markdown" id="pull-request" title=""></a><a data-container="body" data-content="Check our out post archives." data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="/archives" id="archives" title=""></a><div class="author-info"><img class="gravatar large" src="//gravatar.com/avatar/de2d64478e715fb02266f77a3f5641f6" /><a class="twitter-follow-button" data-dnt="true" data-show-count="false" href="https://twitter.com/hanke">Follow hanke</a></div></article></div></section></section>

<section class="container" id="post-info"><div class="row"><article class="content .col-6 col-sm-6 col-md-4 col-md-offset-2 next "><a href="/CocoaPods-0.35" title="CocoaPods 0.35 and Molinillo"><header><h4>Previous Post</h4></header><h3>CocoaPods 0.35 and Molinillo</h3><p>By Samuel E. Giddins</p><a class="chevron_placeholder back" href="/CocoaPods-0.35"></a></a></article><article class="content col-6 col-sm-6 col-md-4 previous"><a href="/search-engine" title="Search Engine"><header><h4>Next Post</h4></header><h3>Search Engine</h3><p>By Florian Hanke</p><a class="chevron_placeholder next" href="/search-engine"></a></a></article></div></section>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>



    <footer class="page-footer"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><h4>CocoaPods is a project from</h4><p class="contributors"><a href="https://twitter.com/alloy">Eloy Durán</a>,&nbsp;<a href="https://twitter.com/fabiopelosin">Fabio Pelosin</a>,&nbsp;<a href="http://orta.github.io">Orta Therox</a>&nbsp;and&nbsp;<a href="http://cocoapods.org/about">The CocoaPods Dev Team</a>&nbsp;with contributions from <a href="https://github.com/CocoaPods/Specs/graphs/contributors">many, many others</a>.</p><h4>Lovingly sponsored by</h4><p class="sponsors"><a href="http://artsy.net">Artsy</a>,<a href="http://discontinuity.eu"> Discontinuity</a>,<a href="http://www.fngtps.com"> Fingertips</a>,<a href="https://www.heroku.com"> Heroku</a>,<a href="http://www.rubymotion.com"> RubyMotion</a>,<a href="https://www.sauspiel.de"> Sauspiel</a>,<a href="https://www.slack.com"> Slack</a>,<a href="https://www.soundcloud.com"> SoundCloud</a>,<a href="https://www.stripe.com"> Stripe</a> and<a href="http://www.technologyastronauts.ch"> Technology&nbsp;Astronauts</a>.</p></article></div></section></footer><footer class="footer-links"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><a class="cocoapods-small-logo" href="http://cocoapods.org"></a><ul><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/using/troubleshooting.html">Support</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/CocoaPods">Github Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/Specs">Podspecs Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://twitter.com/CocoaPods">@CocoaPods</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://groups.google.com/group/cocoapods">Mailing List</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://cocoapods.org/about"><span class="visible-lg-span">CocoaPods</span> Dev Team</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/syntax/podfile.html">Podfile Doc<span class="hidden-lg-span">s</span><span class="visible-lg-span">umentation</span></a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://cocoapods.org/legal">Legal / Conduct</a></li></ul></article></div></section></footer>
    <script src="/assets/blog-c2911afb0e1e77d79b486c5c39fe0cc6.js"></script>

    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  </body>
</html>
