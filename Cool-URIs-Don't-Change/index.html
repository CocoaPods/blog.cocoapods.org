<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
      <title>Cool URIs don't change. - CocoaPods Blog</title>
    

    <meta name="description" content="The blog for CocoaPods.org an Objective-C dependency manager">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="application/rss+xml" title="CocoaPods Blog" href="/feed.xml">

    <meta charset="utf-8" /><meta content="documenation cocoapods objective-c package manager" name="keywords" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="" name="description" /><meta content="" name="author" />
    <link rel="shortcut icon" href="http://beta.cocoapods.org/favicons/favicon.ico" type="image/x-icon" /><link rel="apple-touch-icon" href="http://beta.cocoapods.org/favicons/apple-touch-icon.png" /><link rel="apple-touch-icon" sizes="57x57" href="http://beta.cocoapods.org/favicons/apple-touch-icon-57x57.png" /><link rel="apple-touch-icon" sizes="60x60" href="http://beta.cocoapods.org/favicons/apple-touch-icon-60x60.png" /><link rel="apple-touch-icon" sizes="72x72" href="http://beta.cocoapods.org/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon" sizes="76x76" href="http://beta.cocoapods.org/favicons/apple-touch-icon-76x76.png" /><link rel="apple-touch-icon" sizes="114x114" href="http://beta.cocoapods.org/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon" sizes="120x120" href="http://beta.cocoapods.org/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon" sizes="144x144" href="http://beta.cocoapods.org/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon" sizes="152x152" href="http://beta.cocoapods.org/favicons/apple-touch-icon-152x152.png" />

    <link rel="stylesheet" href="/assets/bootstrap-87270f5e5c31201f334e98fd5ca08aba.css">
    <link rel="stylesheet" href="/assets/main-7283dc37b0ecb1e01185fe7531756273.css">
    <link rel="stylesheet" href="/assets/blog-5b76b50b104400d3aed87173db052a75.css">


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29866548-3', 'cocoapods.org');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <nav class="navbar navbar-static-top" role="navigation"><section class="container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-header-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="glyphicon-plus"></span></button><a class="navbar-brand" href="http://beta.cocoapods.org"></a></div><div class="collapse navbar-collapse navbar-header-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://beta.cocoapods.org/about">About</a></li><li><a href="http://guides.cocoapods.org">Guides</a></li><li class="active"><a href="http://blog.cocoapods.org">Blog</a></li></ul></div></section></nav>

    <section class="container">
  <article class="row">
  <header class="col-md-8 col-md-offset-2 headline blog-post">
    
      <h1>Cool URIs don't change.</h1>
    
    
  </header>
  </article>
</section>

<section id="content-wrapper" class="post">
  <section class="container">
    <article class="row">
      <article class="author metadata col-md-2 col-md-push-10">
        <header>
          
            
              <img class="gravatar large" src="http://gravatar.com/avatar/f116cb3be23153ec08b94e8bd4dbcfeb?s=144" height=72 width=72>
            
            
              
                <p><a href="http://twitter.com/orta">Orta Therox</a></p>
              
            
             <p>2 December 2013</p>
        </header>
      </article>
    
      <article class="content col-md-8">
        <p>TL;DR: <em>We broke some URIs but this is how we ensure people still get the info they were looking for.</em></p>

<p>To try and simplify where you can find CocoaPods documentation we deprecated <a href="http://docs.cocoapods.org">docs.cocoapods.org</a> in favour of <a href="http://guides.cocoapods.org">guides.cocoapods.org</a> and there will be further subsites with different focuses. To ensure a smooth transition I built a small sinatra app that might be of use to other people.</p>

<!-- more -->

<p>Whilst not entirely living up to the <a href="http://www.w3.org/Provider/Style/URI.html">W3C dream</a> of the content changing but the URI not changing I felt a system of smart HTTP 302 permanent redirects would work quite elegantly for our system. Previously we had a static site that was held on github pages, this meant we had no ability to do true redirects, only HTMLs property <code>&lt;meta http-equiv=&quot;refresh&quot;&gt;</code>. This is a sledgehammer approach to redirects and we wanted to use a smaller tool. </p>

<p>So I brought out ruby, the language CocoaPods is built in and created a small app using <a href="http://sinatrarb.com">sinatra</a> that can be used to make a map of URLs to redirect to. Luckily there were not that many pages in the docs and we had equivilent pages in the guides. This is then turned into a <a href="https://www.heroku.com">heroku</a> app and made to be the new <a href="http://docs.cocoapods.org">docs.cocoapods.org</a> silently redirecting people to the new website with the same information they were looking for.</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="ruby language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;sinatra&#39;</span>

<span class="no">NEW_URL</span> <span class="o">=</span> <span class="s2">&quot;http://guides.cocoapods.org&quot;</span>
<span class="no">ROUTES</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;/&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>

  <span class="c1"># References</span>
  <span class="s2">&quot;/podfile.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/syntax/podfile.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/specification.html&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;/syntax/podspec.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/commands.html&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;/terminal/commands.html&quot;</span><span class="p">,</span>

  <span class="c1"># Guides</span>
  <span class="s2">&quot;/guides/philosophy.html&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;/using/faq.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/installing_cocoapods.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/using/getting-started.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/dependency_versioning.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/using/the-podfile.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/closed_source_pods.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/making/private-cocoapods.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/working_with_teams.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/making/private-cocoapods.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/contributing_to_the_master_repo.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/making/specs-and-specs-repo.html&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/creating_and_maintaining_a_pod.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/making/specs-and-specs-repo.html#how-do-i-update-an-existing-pod?&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/guides/creating_your_own_repository.html&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/making/private-cocoapods.html&quot;</span><span class="p">,</span>

  <span class="c1"># Gem specifics should be handled by rubydoc </span>
  <span class="s2">&quot;/cocoapods/*&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;http://rubydoc.info/gems/cocoapods&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/cocoapods_core/*&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;http://rubydoc.info/gems/cocoapods-core&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/xcodeproj/*&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;http://rubydoc.info/gems/xcodeproj&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/claide/*&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;http://rubydoc.info/gems/claide&quot;</span><span class="p">,</span>
  <span class="s2">&quot;/cocoapods_downloader/*&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;http://rubydoc.info/gems/cocoapods-downloader&quot;</span>
<span class="p">}</span>

<span class="no">ROUTES</span><span class="o">.</span><span class="n">each_key</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="o">|</span>

  <span class="c1"># Create a sinatra route for each key, check if it&#39;s value starts with http</span>
  <span class="c1"># and either redirect to the new site with the same query.</span>

   <span class="n">get</span> <span class="n">key</span> <span class="k">do</span>
     <span class="k">if</span> <span class="p">(</span><span class="no">ROUTES</span><span class="o">[</span><span class="n">key</span><span class="o">][</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">3</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;http&quot;</span><span class="p">)</span> 
       <span class="n">redirect</span> <span class="no">ROUTES</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">,</span> <span class="mi">302</span>
     <span class="k">else</span>
       <span class="n">url</span> <span class="o">=</span> <span class="no">NEW_URL</span> <span class="o">+</span> <span class="no">ROUTES</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">query_string</span>
      <span class="n">redirect</span> <span class="n">url</span><span class="p">,</span> <span class="mi">302</span>
     <span class="k">end</span>
   <span class="k">end</span>
 <span class="k">end</span> 

 <span class="c1"># If we&#39;ve missed anything just go to the root of the new URL</span>

 <span class="n">error</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">NotFound</span> <span class="k">do</span>
   <span class="n">redirect</span> <span class="no">NEW_URL</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">query_string</span>
 <span class="k">end</span>
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>The repo can be found here <a href="https://github.com/orta/CocoaPods-Docs-Redirector/">github.com/orta/CocoaPods-Docs-Redirector/</a></p>

      </article>
    </article>
  </section>
</section>

<section id="post-accessories"><section class="container"><div class="row"><article class="content col-md-8 col-md-offset-2"><a data-container="body" data-content="CocoaPods is an open source project. Help us improve these blog posts by sending a pull request. ❤" data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="https://github.com/CocoaPods/blog.cocoapods.org/tree/master/_posts/2013-12-02-Cool-URIs-Don&#39;t-Change.markdown" id="pull-request" title=""></a></article></div></section></section>

<section class="container" id="post-info"><div class="row"><article class="content .col-6 col-sm-6 col-md-4 col-md-offset-2 next "><a href="/Beta" title="CocoaPods Beta"><header><h4>Previous Post</h4></header><h3>CocoaPods Beta</h3><p>Orta Therox</p><a class="back_chevron_placeholder"></a></a></article><article class="content col-6 col-sm-6 col-md-4 previous"></article></div></section>


    <footer class="page-footer"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><h4>CocoaPods is a project from </h4><p class="contributors"><a href="https://twitter.com/alloy">Eloy Durán</a>, <a href="https://twitter.com/fabiopelosin">Fabio Pelosin</a>, <a href="http://orta.github.io">Orta Therox</a>,  and The CocoaPods Dev Team with contributions from <a href="https://github.com/CocoaPods/Specs/graphs/contributors">many, many others</a>.</p><h4>Lovingly sponsored by</h4><p class="sponsors"><a href="http://www.fngtps.com">Fingertips</a>, <a href = "http://www.hipbyte.com">Hipbyte</a>, <a href="http://artsy.net">Artsy</a> and <a href="https://www.sauspiel.de">Sauspiel</a>.</p></article><article class="col-md-8 col-md-offset-2 minor"></article></div></section></footer><footer class="footer-links"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><a class="cocoapods-small-logo" href="http://beta.cocoapods.org"></a><ul><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/using/troubleshooting.html">Support</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/CocoaPods">Github Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/Specs">Podspecs Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://twitter.com/CocoaPods">@CocoaPods</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://groups.google.com/group/cocoapods">Mailing List</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://beta.cocoapods.org/about"><span class="visible-lg-span">CocoaPods</span> Dev Team</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/syntax/podfile.html">Podfile Doc<span class="hidden-lg-span">s</span><span class="visible-lg-span">umentation</span></a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://twitter.com/CocoaPodsFeed">@CocoaPodsFeed</a></li></ul></article></div></section></footer>
    <script src="/assets/blog-151ce1eff3a72c08e4e7106cfa7f7447.js"></script>
    
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    
  </body>
</html>
