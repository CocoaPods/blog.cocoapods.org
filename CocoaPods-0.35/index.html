<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
      <title>CocoaPods 0.35 and Molinillo - CocoaPods Blog</title>
    

    <meta name="description" content="The blog for CocoaPods.org an Objective-C dependency manager">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="application/rss+xml" title="CocoaPods Blog" href="/feed.xml">

    <meta charset="utf-8" /><meta content="documentation cocoapods objective-c package manager" name="keywords" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="" name="description" /><meta content="" name="author" /><meta content="summary" name="twitter:card" /><meta content="@CocoaPods" name="twitter:site" /><meta content="@CocoaPods" name="twitter:creator" /><meta content="CocoaPods" name="twitter:title" />
    <link rel="shortcut icon" href="http://cocoapods.org/favicons/favicon.ico" type="image/x-icon" /><link rel="apple-touch-icon" href="http://cocoapods.org/favicons/apple-touch-icon.png" /><link rel="apple-touch-icon" sizes="57x57" href="http://cocoapods.org/favicons/apple-touch-icon-57x57.png" /><link rel="apple-touch-icon" sizes="60x60" href="http://cocoapods.org/favicons/apple-touch-icon-60x60.png" /><link rel="apple-touch-icon" sizes="72x72" href="http://cocoapods.org/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon" sizes="76x76" href="http://cocoapods.org/favicons/apple-touch-icon-76x76.png" /><link rel="apple-touch-icon" sizes="114x114" href="http://cocoapods.org/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon" sizes="120x120" href="http://cocoapods.org/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon" sizes="144x144" href="http://cocoapods.org/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon" sizes="152x152" href="http://cocoapods.org/favicons/apple-touch-icon-152x152.png" />

    <link rel="stylesheet" href="/assets/bootstrap-87270f5e5c31201f334e98fd5ca08aba.css">
    <link rel="stylesheet" href="/assets/main-7139d3f17a72bdbe396d89701f87e169.css">
    <link rel="stylesheet" href="/assets/blog-d12bb4b17c18584e9e72cc8ce2e9608d.css">


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29866548-3', 'cocoapods.org');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <nav class="navbar navbar-static-top" role="navigation"><section class="container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-header-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="glyphicon-plus"></span></button><a class="navbar-brand" href="http://cocoapods.org"></a></div><div class="collapse navbar-collapse navbar-header-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://cocoapods.org/about">About</a></li><li><a href="http://guides.cocoapods.org">Guides</a></li><li class="active"><a href="http://blog.cocoapods.org">Blog</a></li></ul></div></section></nav>

    <div id ="">
<section class="container" >
  <article class="row">
  <header class="col-md-8 col-md-offset-2 headline blog-post">
    
      <h1>CocoaPods 0.35 and Molinillo</h1>
    
    
  </header>
  </article>
</section>
</div>

<section id="content-wrapper" class="post">
  <section class="container">
    <article class="row">
      <article class="author metadata col-md-2 col-md-push-10">
        <header>
          
            
              <img class="gravatar large" src="http://gravatar.com/avatar/4d6be90af74894fd132fb06dacec04d7?s=144" height=72 width=72>
            
            
              
                <p><a href="http://twitter.com/segiddins">Samuel E. Giddins</a></p>
              
            
             <p>19 November 2014</p>

            
              <a href="https://twitter.com/segiddins" class="twitter-follow-button" data-show-count="false" data-lang="en">
                Follow @segiddins
              </a>
            
        </header>
      </article>
    
      <article class="content col-md-8">
        <p>TL;DR: <em>CocoaPods 0.35</em> has been released, with major improvements to the dependency resolution process, <a href="https://stripe.com/blog/stripe-open-source-retreat">thanks to Stripe&#39;s support</a>. Making the 0.35 release possible is the concurrent release of <a href="https://github.com/CocoaPods/Molinillo">Molinillo</a> 0.1, our new dependency resolution module.</p>

<!-- more -->

<p>The CocoaPods 0.35 is much more limited in scope than <a href="http://blog.cocoapods.org/CocoaPods-0.34/">0.34 was</a>, but the improvements in this version center on the heart of what CocoaPods is: a dependency manager. While the list of new features may seem short, don&#39;t be disappointed: this is a major step forward for CocoaPods.</p>

<h2>Dependency Resolution</h2>

<p>At the heart of any dependency managers is its <code>Resolver</code>, whose job is to take a list of dependencies (defined in a <code>Podfile</code>) and transform those explicit  requirements into a complete set of Pods to install. With CocoaPods 0.35, the core dependency resolution code has been completely rewritten, giving birth to Molinillo, a generic dependency resolution module. This change should improve the experience of using CocoaPods by making things work in a more predictable manner and allowing you to focus more on your project instead of making things easier for CocoaPods.</p>

<h3>Automatic Conflict Resolution</h3>

<p>Consider the following <code>Podfile</code> and note that CocoaPods will by default, when no version requirements are specified, try to activate the latest available version of a pod. (The versions in this example are based on the latest available versions of the pods in question <em>at the time of writing</em>).</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="ruby language-ruby" data-lang="ruby"><span class="n">pod</span> <span class="s1">&#39;AFAmazonS3Client&#39;</span> <span class="c1"># Version 2.0.0 activates AFNetworking with: &gt;= 2.0.0 &amp;&amp; &lt; 3.0.0</span>
<span class="n">pod</span> <span class="s1">&#39;CargoBay&#39;</span>         <span class="c1"># Version 2.1.0 activates AFNetworking with: &gt;= 2.2.0 &amp;&amp; &lt; 3.0.0</span>
<span class="n">pod</span> <span class="s1">&#39;AFOAuth2Client&#39;</span>   <span class="c1"># Version 0.1.2 activates AFNetworking with: &gt;= 1.3.0 &amp;&amp; &lt; 2.0.0</span>
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>On prior versions of CocoaPods, attempting to <code>pod install</code> would yield an error saying <code>Unable to satisfy the following requirements</code> since the latest versions of all three pods have incompatible dependencies on different versions of AFNetworking. With the old resolver, we would naïvely try to activate the latest spec version for the first dependency and continue from there, which would lead to a conflict, since there was no way to get to an older version of <code>AFNetworking</code> (or any of the pods that depended upon it). No more. With the transition to <a href="https://github.com/CocoaPods/Molinillo"><code>Molinillo</code></a>, a generic dependency resolution gem I&#39;ve been writing at Stripe, Podfiles like this will have such conflicts automatically resolved. </p>

<p>Let&#39;s take a look at the same <code>Podfile</code> in CocoaPods 0.35:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="ruby language-ruby" data-lang="ruby"><span class="n">pod</span> <span class="s1">&#39;AFAmazonS3Client&#39;</span> <span class="c1"># Version 1.0.1 activates AFNetworking with: &gt;= 1.3.0 &amp;&amp; &lt; 2.0.0</span>
<span class="n">pod</span> <span class="s1">&#39;CargoBay&#39;</span>         <span class="c1"># Version 1.0.0 activates AFNetworking with: &gt;= 1.0.0 &amp;&amp; &lt; 2.0.0</span>
<span class="n">pod</span> <span class="s1">&#39;AFOAuth2Client&#39;</span>   <span class="c1"># Version 0.1.2 activates AFNetworking with: &gt;= 1.3.0 &amp;&amp; &lt; 2.0.0</span>
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>From the above, it is clear that the latest versions of <code>AFAmazonS3Client</code> and <code>CargoBay</code> are not compatible with the requirements of <code>AFOAuth2Client</code>. As such, the new resolver will now <strong>backtrack</strong> and try to satisfy the requirements of <code>AFOAuth2Client</code> by looking for <strong>older</strong> versions of <code>AFAmazonS3Client</code> and <code>CargoBay</code> that are compatible with <code>AFNetworking</code> versions between <code>1.3.0</code> and <code>2.0.0</code>, thus activating <code>AFNetworking</code> version <code>1.3.4</code> and correctly satisfying all of the dependencies in the <code>Podfile</code>.</p>

<p>The resolver is now able to backtrack when conflicts arise, thus allowing it to simultaneously satisfy all dependency constraints, or definitely state that the Podfile is unresolvable. The development of a <a href="https://github.com/CocoaPods/Resolver-Integration-Specs">language-agnostic resolver integration suite</a> made this possible, and will hopefully ensure that other dependency managers can provide a consistent resolution process.</p>

<h3>Improved Locking</h3>

<p>CocoaPods has always had a version locking feature (it&#39;s your <code>Podfile.lock</code>) that tries to ensure that, whenever someone clones a project and runs <code>pod install</code>, they will get the same dependency versions as you. Well, in CocoaPods 0.35, that version locking has been extended to <em>implicit</em> dependencies as well, so your <code>Podfile.lock</code> is now an absolute source of truth.</p>

<h3>Pre-Release Dependencies</h3>

<p>At CocoaPods, we love it when people make pre-release versions of their libraries -- we do it ourselves! In order to more strictly conform with <a href="http://semver.org">Semantic Versioning</a>, pre-release versions of a Pod will now only be considered in the resolution process if there is any dependency on the pod with a pre-release version in its requirement.</p>

<p>Thus, if you want a pre-release version, such as a beta, you will have to specify that in your Podfile, like so:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="ruby language-ruby" data-lang="ruby"><span class="n">pod</span> <span class="s1">&#39;AFNetworking&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 2.0.0-RC1&#39;</span>
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<h3>External Source Optimizations</h3>

<p>Handling of dependencies with external sources (e.g., <code>pod &#39;RestKit&#39;, git: &#39;https://github.com/RestKit/RestKit.git&#39;</code>) has been optimized and clarified in this release. CocoaPods now only downloads each Pod with an external source once, which has the nice side effect of making linting specifications that have a lot of subspec dependencies faster. CocoaPods also lets you know when there are conflicting dependencies, so you can remove unwanted duplication from your <code>Podfile</code>. Finally, CocoaPods lets you know if you specify the same Pod with different external sources, instead of a random source being chosen.</p>

<h3>Locking Checkout Options</h3>

<p>At the intersection of improved locking and external source optimizations is CocoaPods 0.35’s final feature: the lockfile now hold the information necessary to ensure that dependencies directed installed from a repository will be locked to the same revision until updated. That means this Podfile, along with its corresponding Podfile.lock, will ensure that every member of your team is always on the same revision of <em>all</em> of your dependencies:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="ruby language-ruby" data-lang="ruby"><span class="n">pod</span> <span class="s1">&#39;AFNetworking&#39;</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/AFNetworking/AFNetworking.git&#39;</span>
<span class="n">pod</span> <span class="s1">&#39;RestKit&#39;</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/RestKit/RestKit.git&#39;</span><span class="p">,</span> <span class="ss">:branch</span> <span class="o">=&gt;</span> <span class="s1">&#39;development&#39;</span>
<span class="n">pod</span> <span class="s1">&#39;ARAnalytics&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 2.9.0&#39;</span>
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p><code>AFNetworking</code> will continue to use the same commit that was downloaded when you first ran <code>pod install</code>, so you don’t have to worry about changes sneaking in when you run <code>pod install</code> on a new machine. As always, <code>pod update AFNetworking</code> will update you to the latest commit.</p>

<h2>Performance Improvements</h2>

<p>Molinillo makes resolving a normal application&#39;s Podfile roughly <a href="https://github.com/CocoaPods/CocoaPods/pull/2637#issuecomment-60422101">1.5x faster</a> than the old resolver, which is astonishing given the wider breadth of its feature-set. Additionally, the external source optimizations should make fetching multiple subspecs from an external source many times faster.</p>

<p>The vast majority of this release&#39;s performance improvements come from <a href="https://github.com/alloy">Eloy&#39;s</a> work on optimizing expensive operations in <a href="https://github.com/CocoaPods/Xcodeproj">Xcodeproj</a>. This makes CocoaPods&#39; integration steps blaze by!</p>

<h2>Bonus News</h2>

<p>I’ve been working on bringing <a href="https://github.com/CocoaPods/Molinillo">Molinillo</a> over to <a href="https://github.com/bundler/bundler">Bundler</a> so we can hopefully share a dependency resolution implementation in the future.</p>

<h2>Updating</h2>

<p>To install the last release of CocoaPods you can run:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="bash language-bash" data-lang="bash"><span class="nv">$ </span><span class="o">[</span>sudo<span class="o">]</span> gem install cocoapods
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>Until version 1.0 we strongly encourage you to keep CocoaPods up-to-date.</p>

<p>For all the details, don’t miss the
<a href="https://github.com/CocoaPods/CocoaPods/blob/master/CHANGELOG.md">Changelog</a>!</p>

      </article>
    </article>
  </section>
</section>

<section id="post-accessories"><section class="container"><div class="row"><article class="content col-md-8 col-md-offset-2"><a data-container="body" data-content="CocoaPods is an open source project. Help us improve these blog posts by sending a pull request. ❤" data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="https://github.com/CocoaPods/blog.cocoapods.org/tree/master/_posts/2014-11-19-CocoaPods-0.35.markdown" id="pull-request" title=""></a><a data-container="body" data-content="Check our out post archives." data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="/archives" id="archives" title=""></a><div class="author-info"><img class="gravatar large" src="//gravatar.com/avatar/4d6be90af74894fd132fb06dacec04d7" /><a class="twitter-follow-button" data-dnt="true" data-show-count="false" href="https://twitter.com/segiddins">Follow segiddins</a></div></article></div></section></section>

<section class="container" id="post-info"><div class="row"><article class="content .col-6 col-sm-6 col-md-4 col-md-offset-2 next "><a href="/Stats-2014" title="2014"><header><h4>Previous Post</h4></header><h3>2014</h3><p>By Orta Therox</p><a class="chevron_placeholder back" href="/Stats-2014"></a></a></article><article class="content col-6 col-sm-6 col-md-4 previous"></article></div></section>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>



    <footer class="page-footer"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><h4>CocoaPods is a project from</h4><p class="contributors"><a href="https://twitter.com/alloy">Eloy Durán</a>,&nbsp;<a href="https://twitter.com/fabiopelosin">Fabio Pelosin</a>,&nbsp;<a href="http://orta.github.io">Orta Therox</a>&nbsp;and&nbsp;<a href="http://cocoapods.org/about">The CocoaPods Dev Team</a>&nbsp;with contributions from <a href="https://github.com/CocoaPods/Specs/graphs/contributors">many, many others</a>.</p><h4>Lovingly sponsored by</h4><p class="sponsors"><a href="http://artsy.net">Artsy</a>,<a href="http://discontinuity.eu"> Discontinuity</a>,<a href="http://www.fngtps.com"> Fingertips</a>,<a href="https://www.heroku.com"> Heroku</a>,<a href="http://www.rubymotion.com"> RubyMotion</a>,<a href="https://www.sauspiel.de"> Sauspiel</a>,<a href="https://www.slack.com"> Slack</a>,<a href="https://www.soundcloud.com"> SoundCloud</a>,<a href="https://www.stripe.com"> Stripe</a> and<a href="http://www.technologyastronauts.ch"> Technology&nbsp;Astronauts</a>.</p></article></div></section></footer><footer class="footer-links"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><a class="cocoapods-small-logo" href="http://cocoapods.org"></a><ul><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/using/troubleshooting.html">Support</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/CocoaPods">Github Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/Specs">Podspecs Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://twitter.com/CocoaPods">@CocoaPods</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://groups.google.com/group/cocoapods">Mailing List</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://cocoapods.org/about"><span class="visible-lg-span">CocoaPods</span> Dev Team</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://guides.cocoapods.org/syntax/podfile.html">Podfile Doc<span class="hidden-lg-span">s</span><span class="visible-lg-span">umentation</span></a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://cocoapods.org/legal">Legal / Conduct</a></li></ul></article></div></section></footer>
    <script src="/assets/blog-dceaff1298175a761feee48796373314.js"></script>

    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  </body>
</html>
