<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
      <title>CocoaPods Trunk - CocoaPods Blog</title>
    

    <meta name="description" content="The blog for CocoaPods.org the Cocoa Dependency Manager">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="application/rss+xml" title="CocoaPods Blog" href="/feed.xml">

    <meta charset="utf-8" /><meta content="cocoapods objective-c objc swift package manager libraries documentation search pods podspec podfile cocoa apple ios library" name="keywords" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="The Dependency Manager for iOS &amp; Mac projects" name="description" /><meta content="CocoaPods Dev Team" name="author" /><meta content="summary" name="twitter:card" /><meta content="@CocoaPods" name="twitter:site" /><meta content="@CocoaPods" name="twitter:creator" /><meta content="CocoaPods.org" name="twitter:title" /><meta content="The Dependency Manager for iOS &amp; Mac projects." name="twitter:description" /><meta content="https://www.cocoapods.org/" name="twitter:url" />
    <link rel="shortcut icon" href="https://cocoapods.org/favicons/favicon.ico" type="image/x-icon" /><link rel="apple-touch-icon" href="https://cocoapods.org/favicons/apple-touch-icon.png" /><link rel="apple-touch-icon" sizes="57x57" href="https://cocoapods.org/favicons/apple-touch-icon-57x57.png" /><link rel="apple-touch-icon" sizes="60x60" href="https://cocoapods.org/favicons/apple-touch-icon-60x60.png" /><link rel="apple-touch-icon" sizes="72x72" href="https://cocoapods.org/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon" sizes="76x76" href="https://cocoapods.org/favicons/apple-touch-icon-76x76.png" /><link rel="apple-touch-icon" sizes="114x114" href="https://cocoapods.org/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon" sizes="120x120" href="https://cocoapods.org/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon" sizes="144x144" href="https://cocoapods.org/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon" sizes="152x152" href="https://cocoapods.org/favicons/apple-touch-icon-152x152.png" />

    <link rel="stylesheet" href="/assets/bootstrap-3b61caa441fab92578453d6681fbf963.css">
    <link rel="stylesheet" href="/assets/main-df7f28d697ab31d8aa461b8f8ff0c7e4.css">
    <link rel="stylesheet" href="/assets/blog-a6cba0ad1ceb964c9a5a5387e033c3ff.css">


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29866548-3', 'cocoapods.org');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <nav class="navbar navbar-static-top" role="navigation"><section class="container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-header-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="glyphicon glyphicon-plus"></span></button><a class="navbar-brand" href="https://cocoapods.org"></a></div><div class="collapse navbar-collapse navbar-header-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="https://cocoapods.org/app">App</a></li><li><a href="https://cocoapods.org/about">About</a></li><li><a href="https://guides.cocoapods.org">Guides</a></li><li class="active"><a href="https://blog.cocoapods.org">Blog</a></li></ul></div></section></nav>

    <div id ="">
<section class="container" >
  <article class="row">
  <header class="col-md-8 col-md-offset-2 headline blog-post">
    
      <h1>CocoaPods Trunk</h1>
    
    
  </header>
  </article>
</section>
</div>

<section id="content-wrapper" class="post">
  <section class="container">
    <article class="row">
      <article class="author metadata col-md-2 col-md-push-10">
        <header>
          
            
              <img class="gravatar large" src="http://gravatar.com/avatar/424a9ce662b059c35063b405e160461d?s=144" height=72 width=72>
            
            
              
                <p><a href="http://twitter.com/alloy">Eloy Durán</a></p>
              
            
             <p>20 May 2014</p>

            
              <a href="https://twitter.com/alloy" class="twitter-follow-button" data-show-count="false" data-lang="en">
                Follow @alloy
              </a>
            
        </header>
      </article>
    
      <article class="content col-md-8">
        <p>After a year of architecture design and hard work, we are proud to introduce the ‘Trunk’ web-service, which will dramatically improve the user-experience of podspec publishers.</p>

<!-- more -->

<p>TL;DR We have good reasons for why and how we’re going to continue from here, but feel free to skip over the history lessons and straight to: <a href="#trunk">‘Trunk’, our solution</a>.</p>

<h2 id="the-past-and-the-why">The past and the why</h2>

<p>Many have asked “why doesn’t CocoaPods have a simple way to publish new Pods, like RubyGems and NPM etc have?”, so let’s shine some light on that.</p>

<p>Arguably, configuring a black-box such as Xcode and getting native code to be compiled for various platforms, deployment targets, and architectures to build and the permutations thereof is way harder than what RubyGems, NPM, and the likes have to do. Obviously this is a huge benefit of scripting languages, which (often) do not need to deal with these seemingly arcane workflows.</p>

<p>So, back when I started work on CocoaPods, I did not want to spend much time on a centralised web-service yet if we didn’t even know <em>all</em> the details about our ‘core-business’ yet. Even if you can create a web-service “over a weekend”, that doesn’t mean it’s particularly helpful to the process of figuring out the hard parts, namely resolving, installing, and integrating your dependencies.</p>

<p>In fact, starting off with a web-service makes the whole process <em>harder</em>, because running a web-service means you now suddenly have to do maintenance on that, as the community will expect it to be up 100% of the time. And if there is <strong>one thing</strong> I have learned, then it’s that having this responsibility as a group of volunteers –<em>doing a lot of this in their spare-time and for gratis</em>– it is that inevitably there will be burn-out and/or the need to raise a lot of money due to possibly hard to maintain architectural decisions. (Examples of this are the amount of pressure on the RubyGems.org volunteers in the case of downtime etc and <a href="https://scalenpm.nodejitsu.com">scalenpm.org</a> in the case of needing large funds to maintain their infrastructure.)</p>

<p>I also wanted to design the architecture so that, for instance, companies that want to use their private dependencies through CocoaPods would not have to configure and host a web-service either. Nobody wants to do more than is necessary, not in the least because it just makes for a frustrating server-admin experience.</p>

<p>From these reasons stems the simple solution to host these in a simple directory structure and use established SCM systems to keep these versioned and simple to distribute. This strategy to keep things simple has served us rather well. However, at a certain scale, and especially in a Open-Source environment such as our ‘master’ spec-repo, there inevitably comes a time where you need to take it to the next level…</p>

<h2 id="the-problem">The problem</h2>

<p>Our ‘master’ spec-repo boss, Sir <a href="http://twitter.com/SmileyKeith">Keith Smiley</a>, is a review-and-merge-monster and has been able to keep-up with all of the pull-requests that you have been sending his way for the last two years. But, as we can clearly see the rising trend of number of Pods being published, at some point even Keith won’t be able to handle your scale.</p>

<p>Another issue we noticed is that the current workflow of creating a pull-request and automatically getting feedback from Travis in addition to manual reviews from Keith and <a href="http://twitter.com/squarefrog">Paul</a> has lead to many podspec publishers being too ‘lazy’ and instead of properly testing whether or not a podspec will actually work well for a user by testing it in their own applications, they end-up updating and pushing their specs until it supposedly works. This is not only an abuse of the time our volunteers have, but it also shifts the responsibility to ensure proper working podspecs away from the publisher.</p>

<p>Other people in the community would like to create web-services around CocoaPods and for this they need some form of API and a format <em>other</em> than Ruby, to be able to interpret the podspecs and provide any meaningful service around them.</p>

<p>Finally, at some point, even <em>the most well-intended person</em> will slip up. A good example of this is when an unauthorised person pushed a podspec for an non-existing AFNetworking version. Obviously, the only person that should be allowed to do so is <a href="http://twitter.com/mattt">Mattt</a> (the author of AFNetworking) and possibly other (maintainers) that Mattt gives his blessing to do so.</p>

<p>The solution? An automated web-service and a database of registered &#39;owners&#39; with an ACL layer that only allows designated people to release new versions.</p>

<h2 id="trunk">‘Trunk’, our solution</h2>

<p></article>
</div>
</section>
<div style="background-color:white;">
<section class="container"><div class="row"><article class="content col-md-10 col-md-offset-1"><center>
<a href='/assets/blog_img/trunk/cocoapods-trunk-image.jpg '><img  src='/assets/blog_img/trunk/cocoapods-trunk-image.jpg '></a></center></article>
</div>
</section>
</div>
<section class="container">
<div class="row"><article class="content col-md-8 col-md-offset-2"></p>

<p><em>Cocoa Pods in varying levels of ripeness growing on the trunk of a tree.</em> – <a href="http://en.wikipedia.org/wiki/Cocoa_production_in_Ivory_Coast">Wikipedia</a></p>

<p>Today we are launching our web-service to remedy the aforementioned problems. The introduction of the ‘Trunk’ web-service means that publishers can now publish Pods directly from the command-line, <em>without</em> the need to create a pull-request.</p>

<p>The first person to publish a pod automatically gets designated as the ‘owner’ of that pod name in the scope of the ‘master’ spec-repo. The ‘owner’ can then add other ‘owners’ as they see fit. Only ‘owners’ are allowed to publish subsequent versions of said pod. For more information on this and interacting with ‘Trunk’ in general, see <a href="http://guides.cocoapods.org/making/getting-setup-with-trunk">this guide</a>.</p>

<p>Note that we are still hosting the canonical database of available Pods and their specifications in <a href="https://github.com/CocoaPods/Specs">the same git repo on GitHub</a>. This means that if something were to affect the uptime/stability of this database, our users can rely on GitHub’s professional and 24/7 support. Thus, if ‘Trunk’ were to go down, for whatever reason, our normal users are not affected and only ‘owners’ will be unable to publish new Pods during that time-frame. All in all, this means better stability for <em>you</em>, our users, and less stress on <em>us</em>, the volunteers. A simple overview of our architecture is shown in the following diagram:</p>

<p></article>
</div>
</section>
<div style="background-color:white;">
<section class="container"><div class="row"><article class="content col-md-10 col-md-offset-1"><center>
<a href='/assets/blog_img/trunk/architecture-diagram.png '><img  src='/assets/blog_img/trunk/architecture-diagram.png '></a></center></article>
</div>
</section>
</div>
<section class="container">
<div class="row"><article class="content col-md-8 col-md-offset-2"></p>

<p>With regards to ensuring that a podspec works properly, <em>you</em>, the ‘owner’, and <em>only</em> you are responsible for a podspec working properly. We only validate your podspec on our end for the bare-minimum meta-data that we need to be able to register your podspec. We will <strong>no</strong> longer validate your podspec for you on Travis. And we will <strong>not</strong> accept updates to published podspecs without a rigorous review process that is to be performed through a pull-request on the ‘master’ spec-repo. Thus, it is <em>highly</em> recommended that you test your podspec in your own real applications and/or demo applications <em>before</em> you publish a podspec.</p>

<p>Finally, the ‘Trunk’ web-service will no longer store the podspecs in the Ruby format. Instead these will be stored as JSON and thus will directly be usable by people wanting to create other web-services around the CocoaPods ecosystem.</p>

<h2 id="transition">Transition</h2>

<p>While we transition to the ‘Trunk’ web-service, we will have a grace-period during which all the currently known Pods can be claimed by their respective ‘owners’. During this period <code>pod trunk push</code> will be <strong>disabled</strong>, until we are satisfied that the majority of the (important) Pods are claimed. Please read Keith’s <a href="http://blog.cocoapods.org/Claim-Your-Pods/">blog post on this topic</a> for more information on claiming your Pods.</p>

<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>

<h3 id="i’m-getting-a-&quot;[!]-push-access-is-currently-disabled.&quot;-message,-what’s-wrong?">I’m getting a &quot;[!] Push access is currently disabled.&quot; message, what’s wrong?</h3>

<p>During the claims period, <code>pod trunk push</code> will be disabled. Please see the ‘<a href="#transition">Transition</a>’ section.</p>

<h3 id="will-i-still-be-able-to-make-modifications-to-a-published-podspec?">Will I still be able to make modifications to a published podspec?</h3>

<p>Once a podspec for a specific version of a pod is published, you won&#39;t be able to modify it. At least not in an automated fashion.
The majority of update requests are a results of contributors not sufficiently testing their podspec beforehand.
Generally what you want to do is to publish a <strong>new version</strong> for a pod, not edit an already published version in-place.</p>

<p>However, if you really fall into some exceptional case and really have to modify an already published podspec for a given version, you may still create a pull-request against the ‘master’ spec-repo; but we will not necessarily accept it and we do not offer any guarantees on turn-around time.</p>

<h3 id="how-can-i-distinguish-the-format-of-a-podspec.">How can I distinguish the format of a podspec.</h3>

<p>Podspecs using the Ruby DSL will use the <code>.podspec</code> extension, JSON based
podspecs will use <code>.podspec.json</code>.</p>

<h3 id="will-the-specs-in-the-ruby-format-be-deprecated?">Will the specs in the Ruby format be deprecated?</h3>

<p>No, they are here to stay and are the preferred method if you need to be able to perform automatic generation, such as collecting a list of all the source files from disk. The <code>pod trunk push</code> command will take care of converting the podspec to JSON. This means that you do <em>not</em> have to change any existing podspecs.</p>

<h3 id="will-private-repositories-need-to-adopt-the-json-format?">Will private repositories need to adopt the JSON format?</h3>

<p>No. Moreover, the <code>pod push</code> command will keep the old behaviour, except that we are moving this into <code>pod repo push</code> to emphasise the distinction.
Just keep in mind that if two files are available CocoaPods will prefer the JSON format.</p>

<h3 id="can-i-access-the-specs-via-http?">Can I access the specs via HTTP?</h3>

<p>Yes, you can use the following endpoints of the GitHub API. At a later point we will introduce a public API on ‘Trunk’ that you can use to standardise this, although it should be noted that if you do not need more than what the GitHub API already offers, it’s best to just use that, as GitHub will be able to offer better uptimes than we can.</p>

<p>To the get the list of the available Pods:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="text language-text" data-lang="text">https://api.github.com/repos/CocoaPods/Specs/contents/Specs
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>To the get the available versions of a Pod:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="text language-text" data-lang="text">https://api.github.com/repos/CocoaPods/Specs/contents/Specs/ObjectiveSugar
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
<p>To fetch the podspec of a version of a Pod:</p>
<div class="highlight">      </article>
      </article>
      </section>
      
      <div style="background-color:white;">
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
<pre class='highlight'><code class="text language-text" data-lang="text">https://api.github.com/repos/CocoaPods/Specs/contents/Specs/ObjectiveSugar/0.9/ObjectiveSugar.podspec.json
</code></pre>      </article>
      </article>
      </section>
      </div>
      
      <section class="container">
      <article class="row">
      <article class="content col-md-8 col-md-offset-2">
</div>
      </article>
    </article>
  </section>
</section>

<section id="post-accessories"><section class="container"><div class="row"><article class="content col-md-8 col-md-offset-2"><a data-container="body" data-content="CocoaPods is an open source project. Help us improve these blog posts by sending a pull request. ❤" data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="https://github.com/CocoaPods/blog.cocoapods.org/tree/master/_posts/2014-05-20-CocoaPods-Trunk.markdown" id="pull-request" title=""></a><a data-container="body" data-content="Check our out post archives." data-original-title="" data-placement="top" data-toggle="popover" data-trigger="hover" href="/archives" id="archives" title=""></a><div class="author-info"><img class="gravatar large" src="//gravatar.com/avatar/424a9ce662b059c35063b405e160461d" /><a class="twitter-follow-button" data-dnt="true" data-show-count="false" href="https://twitter.com/alloy">Follow alloy</a></div></article></div></section></section>

<section class="container" id="post-info"><div class="row"><article class="content .col-6 col-sm-6 col-md-4 col-md-offset-2 next "><a href="/Cocoa-Kucha-4" title="Cocoa Kucha 4 - San Francisco - 28th May 2014"><header><h4>Previous Post</h4></header><h3>Cocoa Kucha 4 - San Francisco - 28th May 2014</h3><p>By Kyle Fuller</p><a class="chevron_placeholder back" href="/Cocoa-Kucha-4"></a></a></article><article class="content col-6 col-sm-6 col-md-4 previous"><a href="/Claim-Your-Pods" title="Claim Your Pods"><header><h4>Next Post</h4></header><h3>Claim Your Pods</h3><p>By Keith Smiley</p><a class="chevron_placeholder next" href="/Claim-Your-Pods"></a></a></article></div></section>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>



    <footer class="page-footer"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><h4>CocoaPods is a project from</h4><p class="contributors"> <a href="https://twitter.com/benasher44">Ben Asher</a>, <a href="https://twitter.com/dnkoutso">Dimitris Koutsogiorgas</a>, <a href="http://dantoml.com">Danielle Tomlinson</a>, <a href="http://orta.io">Orta Therox</a>, and <a href="https://cocoapods.org/about#team">The CocoaPods Dev Team</a> with contributions from <a href="https://github.com/CocoaPods/Specs/graphs/contributors">many, many others</a>.</p><h4>Lovingly sponsored by</h4><p class="sponsors"><a href="http://artsy.net">Artsy</a>, <a href="http://www.usebutton.com">Button</a>, <a href="http://www.capitalone.io">Capital One</a>, <a href="https://circleci.com">CircleCI</a>, <a href="http://discontinuity.eu">Discontinuity</a>, <a href="http://www.fngtps.com">Fingertips</a>, <a href="https://www.heroku.com">Heroku</a>, <a href="https://realm.io">Realm</a>, <a href="http://www.rubymotion.com">RubyMotion</a>, <a href="https://www.sauspiel.de">Sauspiel</a>, <a href="https://www.slack.com">Slack</a>, <a href="https://www.soundcloud.com">SoundCloud</a>, <a href="https://www.stripe.com">Stripe</a>, <a href="https://www.squareup.com">Square</a>, and  <a href="http://www.technologyastronauts.ch">Technology&nbsp;Astronauts</a>.</p></article></div></section></footer><footer class="footer-links"><section class="container"><div class="row"><article class="col-md-8 col-lg-8 col-sm-12 col-md-offset-2 col-lg-offset-2 col-xs-12"><a class="cocoapods-small-logo" href="https://cocoapods.org"></a><ul><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://guides.cocoapods.org/using/troubleshooting.html">Support</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://github.com/CocoaPods/CocoaPods">GitHub Repo</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://status.cocoapods.org">Web Properties Status</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://twitter.com/CocoaPods">@CocoaPods</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="http://groups.google.com/group/cocoapods">Mailing List</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://cocoapods.org/about"><span class="visible-lg-span">CocoaPods</span> Dev Team</a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://guides.cocoapods.org/syntax/podfile.html">Podfile Doc<span class="hidden-lg-span">s</span><span class="visible-lg-span">umentation</span></a></li><li class="col-md-3 col-sm-3 col-xs-6"><a href="https://cocoapods.org/legal">Legal / Conduct</a></li></ul></article></div></section></footer>
    <script src="/assets/blog-c2911afb0e1e77d79b486c5c39fe0cc6.js"></script>

    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  </body>
</html>
